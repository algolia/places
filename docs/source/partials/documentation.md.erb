## Getting started

To use Algolia Places, all you need is an `<input />` and some JavaScript code that will load
and use the places.js library.

### Using `<script>` tags

```html
<input type="search" id="address-input" placeholder="Where are we going?" />
<script src="<%= config[:places_cdn_url] %>"></script>
<script>
  var placesAutocomplete = places({
    container: document.querySelector('#address-input')
  });
</script>
```

### With npm

Install the module:

```sh
npm install places.js --save
```

Put an `<input />` in your html page:

```html
<input type="search" id="address-input" placeholder="Where are we going?" />
```

Initialize the places.js library:

```js
var places = require('places.js');
var placesAutocomplete = places({
  container: document.querySelector('#address-input')
});
```

### Demo

As a result, you will get the Algolia Places autocompletion menu:

<input type="search" id="docs-getting-started-demo" class="form-control" placeholder="Where are we going?" />

## API

### Options

Here are the options you can pass to the `places(options)` function.

<!-- Indentation is on purpose for <td>s, to allow HTML inside markdown -->
<table class="api">
  <thead><tr>
    <th>Option</th>
    <th>Description</th>
  </tr></thead>
  <tbody>
    <tr>
<td markdown="1">
`container`

Type: [HTMLInputElement](https://www.w3.org/2003/01/dom2-javadoc/org/w3c/dom/html2/HTMLInputElement.html)

required: **yes**
</td>
<td markdown="1">
Determines the `<input />` that will be used for the Algolia Places autocompletion menu.

You just need to pass a reference to an Element. Obtained via
[document.querySelector](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector) for example.
</td>
    </tr>
    <tr>
<td markdown="1">
`language`

Type: string

required: no
</td>
<td markdown="1">
Change the default language of the results.
You can pass two letters country codes ([ISO 639-1](https://en.wikipedia.org/wiki/ISO_3166-1#Officially_assigned_code_elements)).

**Default**: Current user language obtained via `navigator.language` in the two letter form.
Example: `en` when navigator.language is `en_US`.
</td>
    </tr>
    <tr>
<td markdown="1">
`countries`

Type: string[]

required: no
</td>
<td markdown="1">
Change the countries to search in. You must pass an array of two letters country codes
([ISO 639-1](https://en.wikipedia.org/wiki/ISO_3166-1#Officially_assigned_code_elements)).

**Default**: Search on the whole planet.
</td>
    </tr>
    <tr>
<td markdown="1">
`types`

Type: string[]

required: no
</td>
<td markdown="1">
Change the type of results you want to search in.

Available types:

- city
- country
- address

You must provide an array of types
if you want to configure this.

**Default**: Search in all types.
</td>
    </tr>
    <tr>
<td markdown="1">
`style`

Type: boolean

required: no
</td>
<td markdown="1">
Control whether the default styles should be used.

**Default**: Styles are enabled.
</td>
    </tr>
  </tbody>
</table>

Simple example providing only the required `container` parameter:

```js
var placesAutocomplete = {
  container: document.querySelector('#demo')
};
```

Advanced example using all parameters:

```js
var placesAutocomplete = {
  container: document.querySelector('#demo'),
  language: 'de', // Receives results in German
  countries: ['us', 'ru'], // Search in the United States of America and in the Russian Federation
  types: ['city'] // Search only for cities names
};
```

### Events

The Algolia Places autocomplete exposes some events that you can register to:

```js
var placesAutocomplete = {
  container: document.querySelector('#demo')
};

placesAutocomplete.on('change', e => console.log(e.suggestion));
```

<table class="api">
  <thead><tr>
    <th>Event</th>
    <th>Description</th>
  </tr></thead>
  <tbody>
    <tr>
<td markdown="1">
`change`

Event data:

- suggestion *Type: [suggestion](#suggestion-object)*
- query *Type: string*,
- suggestionIndex *Type: number*
</td>
<td markdown="1">
Fired when suggestion selected in the dropdown or hint was validated.

You can use this event to then populate another form, [see the example](examples.html#complete-form).
</td>
    </tr>
    <tr>
<td markdown="1">
`suggestions`

Event data:

- suggestions *Type: [suggestion](#suggestion-object)*
- query *Type: string*
</td>
<td markdown="1">
Fired when dropdown receives suggestions. You will receive the array of suggestions that are displayed.

You will also receive this event when no places were found.

You can use this event to display the suggestions on a map, see the [map example](examples.html#displaying-a-map).
</td>
    </tr>
    <tr>
<td markdown="1">
`cursorchanged`

Event data:

- suggestion *Type: [suggestion](#suggestion-object)*
- query *Type: string*
- suggestionIndex *Type: number*
</td>
<td markdown="1">
Fired when arrows keys are used to navigate suggestions.

You can use this event to highlight markers on a map, see the [map example](examples.html#displaying-a-map).
</td>
    </tr>
  </tbody>
</table>

### Suggestion object

All of the events will send suggestion objects with those properties:

<table class="api">
  <thead><tr>
    <th>Property</th>
    <th>Description</th>
  </tr></thead>
  <tbody>
    <tr>
<td markdown="1">
`administrative`

Type: string
</td>
<td markdown="1">
FIXME.
</td>
    </tr>
    <tr>
<td markdown="1">
`city`

Type: string
</td>
<td markdown="1">
City name.
</td>
    </tr>
    <tr>
<td markdown="1">
`country`

Type: string
</td>
<td markdown="1">
Country name.
</td>
    </tr>
    <tr>
<td markdown="1">
`countryCode`

Type: string
</td>
<td markdown="1">
Two letters country code ([ISO 639-1](https://en.wikipedia.org/wiki/ISO_3166-1#Officially_assigned_code_elements)).
</td>
    </tr>
    <tr>
<td markdown="1">
`type`

Type: string
</td>
<td markdown="1">
Type of the current suggestion, possible values: `country`, `city`, `address`.
</td>
    </tr>
    <tr>
<td markdown="1">
`latlng`

Type: Object
</td>
<td markdown="1">
Latitude and longitude of the place found. Shape: `{lat: 48.797885, lng: 2.337034}`.
</td>
    </tr>
    <tr>
<td markdown="1">
`name`

Type: string
</td>
<td markdown="1">
Display name of the place found.

Examples:

  - Paris
  - 589 Howard Street San Francisco
</td>
    </tr>
    <tr>
<td markdown="1">
`postcode`

Type: string
</td>
<td markdown="1">
Postcode (or ZIP Code) of the place found.

Examples:

  - 94230
  - 1001
</td>
    </tr>
    <tr>
<td markdown="1">
`value`

Type: string
</td>
<td markdown="1">
Full display name of the place found. It's the value displayed in the input.

Examples:

  - Paris Île-de-France, France
  - 589 Howard Street San Francisco, California, United States of America
</td>
    </tr>
  </tbody>
</table>

## Rate limit (FIXME)

FIXME what's the final rate limit?

## License

Algolia Places [is licensed](https://github.com/algolia/places/blob/master/LICENSE) under [MIT](https://en.wikipedia.org/wiki/MIT_License).

Address data © [OpenStreetMap](https://www.openstreetmap.org/) contributors.

## Examples

Have a look at our [examples page](examples.html).
